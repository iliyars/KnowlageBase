DependencyProperty - Особая реализация свойств в WPF, предоставляющая дополнительные взможности по сравнению с свойствами .NET.

*Эти свойства заключены в оболучку обычных свойств CLR и взаимодействовать с ними можно как с обычными совойствами*

**Назначение свойств зависимостей -** предоставлять способ вычисления значения свойства **на основе значения других входных данных** таких как:
- Системные свойства, такие как темы и предпочтения пользователя.
- JIT-механизмы определения свойств, такие как привязка данных, анимация и расадровка.\
- Шаблоны с множественными использованием, такие как ресурсы и стили.
- Значения, известные по отношениям родители-потомки с другими элементами в дереве элементов.
Кроме того свойства зависимостей может предоставлятьь следующие возможности:
- Автономная проверка
- Значение по умолчанию
- Обратные вызовы, отслеживающие изменения других свойств.
- Система, которая может применять значения свойств на основе сведений о среде выполнения.


### Определение свойств зависемостей
- Класс, определяющий св-во зависимости должен иметь в цепочке наследования класс `DependencyObject` 
- Единственное св-во зависимости предоставляется как `public static readonly` в поле типа `DependencyProperty`. По соглащению имя этого поля закнчивается на `Property`. (`HeaderProperty`, `WidthProperty`).
- Переменная `DependencyProperty` зарегистрирована с помощью статического вызова `DependencyProperty.Register()`, что обычно происходит в конструкторе либо встроенным образом, при обявлении переменной.
- Класс определяет дружественное к XAML свойство CLR, которое осуществляет вызов методов, предоставленных `DependencyObject`, для получения и установки значения.

### Возможности свойств зависимостей
- Свойства зависимостей могут наследовать свои знаения от XAML-определения родительского элемента. Например, если вы определите значение атрибута `FontSize` в открывающем дескрипторе `<Window>`, то все элементы управления в этом Window будут по умолчанию иметь этот размер шрифта.
- Свойства зависимости поддерживают возможность иметь значения, установленные элементами, находящимися в области видимости XAML, такие как установка Button свойства Dock родительского DockPanel.
- Свойства зависимости позволяют WPF вычислять значение на основе нескольких внешних значений, что может быть очень важно для анимации и служб привязки данных.
- Свойства зависимости предоставляют инфраструктуру поддержки для триггеров WPF (так же довольно часто используемых при работе с анимацией и привязкой данных).


### Регестрирование Dependency Property
Пример св-ва зависимости Height из FrameworkElement

```cs
// FrameworkElement "является" DependencyObject.
public class FrameworkElement : UIElement, IFrameworkInputElement, IInputElement, ISupportInitialize, IHaveResources, IQueryAmbient
{
   // Статическое свойство только для чтения DependencyProperty.
   public static readonly DependencyProperty HeightProperty;
   
   // Поле DependencyProperty часто регистрируется в статическом конструкторе класса.
   static FrameworkElement()
   {
      HeightProperty = DependencyProperty.Register (
      "Height",
      typeof(double),
      typeof(FrameworkElement),
      new FrameworkPropertyMetadata((double) 1.0 / (double) 0.0,
         FrameworkPropertyMetadataOptions.AffectsMeasure,
         new PropertyChangedCallback(FrameworkElement.OnTransformDirty)),
      new ValidateValueCallback(FrameworkElement.IsWidthHeightValid));
   }
   
   // Оболочка CLR, реализованная унаследованными
   // методами GetValue()/SetValue().
   public double Height
   {
      get { return (double)base.GetValue(HeightProperty); }
      set { base.SetValue(HeightProperty, value); }
   }
}
```

Объект `DependencyProperty` Создаётся статическим методом `DependencyProperty.Register()`
Аргументы:
1. имя совщства-оболочки CLR
2.  несет информацию о типе инкапсулированных данных
3. информация о типе класса, к которому относиться это свойство.
4. объект FrameworkPropertyMetadata - описывает различные детали, 
5. ValidateValueCallback - делегат проверяющий правильность значения.
